(ns aoc2019.day-10-test
  (:require [clojure.test :refer :all]
            [aoc2019.day-10 :refer :all]
            [aoc2019.intcode :refer [read-intcode-program]]))

(def test-fields
  [".#..#
.....
#####
....#
...##"
   "......#.#.
#..#.#....
..#######.
.#.#.###..
.#..#.....
..#....#.#
#..#....#.
.##.#..###
##...#..#.
.#....####"
   "#.#...#.#.
.###....#.
.#....#...
##.#.#.#.#
....#.#.#.
.##..###.#
..#...##..
..##....##
......#...
.####.###."
   ".#..#..###
####.###.#
....###.#.
..###.##.#
##.##.#.#.
....###..#
..#.#..#.#
#..#.#.###
.##...##.#
.....#.#.."
   ".#..##.###...#######
##.############..##.
.#.######.########.#
.###.#######.####.#.
#####.##.#.##.###.##
..#####..#.#########
####################
#.####....###.#.#.##
##.#################
#####.##.###..####..
..######..##.#######
####.##.####...##..#
.#####..#.######.###
##...#.##########...
#.##########.#######
.####.#.###.###.#.##
....##.##.###..#####
.#.#.###########.###
#.#.#.#####.####.###
###.##.####.##.#..##"
   "#.........
...#......
...#..#...
.####....#
..#.#.#...
.....#....
..###.#.##
.......#..
....#...#.
...#..#..#"
   ".#....#####...#..
##...##.#####..##
##...#...#.#####.
..#.....#...###..
..#.#.....#....##"])

(deftest parsing
  (is (= (parse "..\n#.") [[0 1]])))

(deftest line-of-sight
  (is (let [[asteriod & others] (parse (test-fields 5))]
        (= (num-line-of-sight asteriod others) 7))))

(deftest part-1-examples
  (are [answer field] (= (part-1 (parse field)) answer)
    8   (test-fields 0)
    33  (test-fields 1)
    35  (test-fields 2)
    41  (test-fields 3)
    210 (test-fields 4)))

(def puzzle-input (get-input))

(deftest part-1-real
  (is (= (part-1 puzzle-input) 309)))

; TODO uncomment

#_(deftest part-2-example
  (is (= (part-2 (parse (test-fields 4))) 802)))

#_(deftest part-2-real
  (is (= (part-2 puzzle-input) [TODO])))
